\chapter{Partial Correctness for Garbage Collection}
\label{sec:gc}

In this chapter, I shall produce a general correctness criteria for
garbage collection, and show how it can be applied. I shall do this by
first comparing the mark-sweep and copying formalisms, and abstracting
the commonalities from both. Definitions shall be reused, but the
proofs shall not be.

As proving a very abstract correctness criteria holds for a concrete
implementation may be difficult, I shall provide a ``framework'' for
proof: a collection of simpler obligations which, together, are
sufficient for correctness. I shall then conclude by briefly
discussing how the formalism could possibly be extended to apply to
collectors other than the stop-the-world type.

\section{Comparison of Mark-Sweep and Copying Correctness}
\label{sec:gc-comparison}

\todo{Comparison of approaches}

\subsection{Stages of Garbage Collection}
\label{sec:gc-comparison-stages}

\todo{Stages all garbage collectors do (perhaps implicitly)}

\section{Correct Garbage Collection}
\label{sec:gc-correct}

\todo{Statement of correctness criteria}

\section{A Framework for Proof}
\label{sec:gc-framework}

\todo{Somewhat more concrete proof obligations which, together, imply
  partial correctness.}

\subsection{Sufficiency of the Framework}
\label{sec:gc-framework-sufficiency}

\todo{Proof that the framework works}

\section{Less Strict Collectors}
\label{sec:gc-lessstrict}

\todo{Discussion of assumptions (stop-the-world)}

\subsection{Incremental Garbage Collection}
\label{sec:gc-lessstrict-incremental}

\todo{Transformation to stop-the-world and proof. Remaining out of
  scope proof obligation (all valid interleavings work)}

\subsection{Generational Garbage Collection}
\label{sec:gc-lessstrict-generational}

\todo{Generations are subheaps for minor-collection
  correctness. Normal proof for major-collection correctness.}
